<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, viewport-fit=cover"
  />

  <!-- Kill aggressive client caching (helps mobile) -->
  <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, max-age=0" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <title>Fantasy Fight Picks</title>

  <!-- Your stylesheet -->
  <link rel="stylesheet" href="style.css" />

  <!-- HARD-WIRE the API so every device hits the Render backend -->
  <script>
    // Absolute API base for everyone:
    window.API_BASE = "https://fantasy-fight-picks-json.onrender.com/api";
  </script>

  <!-- Optional override: if you ever visit with ?api=... it will persist -->
  <script>
    (function () {
      try {
        const qp = new URLSearchParams(location.search);
        const param = qp.get("api");
        if (param) localStorage.setItem("API_BASE", param);
        const saved = localStorage.getItem("API_BASE");
        if (saved) window.API_BASE = saved;
        console.log("[FPP] API_BASE =", window.API_BASE);
      } catch (e) {
        console.warn("[FPP] API_BASE override error:", e);
      }
    })();
  </script>

  <!-- One-time safety: unregister any old service worker + clear caches -->
  <script>
    (function () {
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker.getRegistrations()
          .then(regs => regs.forEach(r => r.unregister()))
          .catch(() => {});
      }
      try {
        if (window.caches && caches.keys) {
          caches.keys().then(keys => keys.forEach(k => caches.delete(k)));
        }
      } catch {}
    })();
  </script>
</head>

<body>
  <noscript>This app requires JavaScript.</noscript>

  <!-- Status line your JS can update on network errors -->
  <div id="appStatus"></div>

  <!-- Champion banner container -->
  <div id="champBanner"></div>

  <!-- Your appâ€™s main container. Keep IDs your script.js expects. -->
  <main id="app"></main>

  <!-- Load your client code AFTER API_BASE is set -->
  <script src="script.js" defer></script>
</body>
</html>
