<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Fantasy Fight Picks</title>
  <meta name="description" content="Fast, lightweight UFC fantasy picks app." />

  <!-- FAVICONS ‚Äî same file, cache-busted; no .ico override -->
  <link rel="icon" type="image/png" sizes="32x32" href="/ffp-fist-octagon.png?v=20251005" />
  <link rel="icon" type="image/png" sizes="16x16" href="/ffp-fist-octagon.png?v=20251005" />
  <link rel="apple-touch-icon" sizes="180x180" href="/ffp-fist-octagon.png?v=20251005" />
  <meta name="theme-color" content="#D84D3F" />

  <!-- Brand typeface -->
  <link href="https://fonts.googleapis.com/css2?family=Teko:wght@600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#121417;
      --panel:#181B20;
      --text:#EAECEF;
      --muted:#8D97A8;

      /* brand accent = logo red */
      --brand:#D84D3F;
      --success:#24B27B;
      --graphite:#323844;
      --divider:#242A34;

      --radius:16px;
      --gap:16px;
      --shadow: 0 8px 30px rgba(0,0,0,.35);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      color:var(--text);
      background:radial-gradient(1200px 800px at 50% -10%, #171b20 0%, var(--bg) 60%);
      font-family: ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    a{color:var(--brand);text-decoration:none}
    .wrap{max-width:1100px;margin:0 auto;padding:14px 16px 40px}

    /* header / brand */
    .ffp-header{
      position:sticky; top:0; z-index:30;
      background:linear-gradient(180deg, rgba(18,20,23,.96), rgba(18,20,23,.82));
      border-bottom:1px solid var(--divider);
      backdrop-filter:blur(8px);
    }
    .brand{
      max-width:1100px; margin:0 auto;
      padding:12px 16px;
      display:flex; align-items:center; justify-content:center; gap:14px;
      text-align:center;
    }
    .logo{display:block; line-height:0;}
    .logo img{
      display:block;
      height:92px; width:auto;
      filter: drop-shadow(0 10px 24px rgba(0,0,0,.45));
    }
    @media (min-width:1100px){ .logo img{ height:108px; } }

    .title{
      font-family:"Teko", ui-sans-serif, system-ui, sans-serif;
      font-weight:700;
      letter-spacing:.5px;
      text-transform:uppercase;
      line-height:.9;
      color:var(--text);
      font-size:clamp(28px, 6vw, 58px);
      margin:0 6px;
      text-align:center;
    }

    .meta{
      width:100%;
      display:flex; align-items:center; justify-content:center; gap:10px;
      padding:0 0 10px;
      color:var(--muted);
      font-size:13px;
    }
    #statusText, #lockoutText{ text-align:center; }

    .champ-names[hidden]{display:none !important;}
    .champ-names{
      display:inline-block;
      margin-left:4px;
      color:var(--brand);
      font-weight:700;
      font-size:clamp(14px, 2.4vw, 18px);
      text-transform:uppercase;
      letter-spacing:.3px;
    }
    .crown-badge{ display:none !important; }

    .page{ max-width:1100px; margin:0 auto; padding:0 16px; }
    .section-title, h1, h2{
      font-family:"Teko", ui-sans-serif, system-ui, sans-serif;
      text-transform:uppercase; letter-spacing:.4px;
      text-align:center;
      margin:8px 0 10px;
      font-size:clamp(18px, 3.6vw, 28px);
    }

    .panel{
      background:var(--panel);
      border:1px solid var(--divider);
      border-radius:14px;
      padding:14px;
      margin:12px auto;
      box-shadow: var(--shadow);
    }
    .card--flat{ background:transparent; border-color:transparent; box-shadow:none; padding:0; margin:6px 0; }

    /* champion ribbon */
    #champBanner{
      display:block; /* default visible; JS will hide/show based on lockout/finalization */
      max-width:1100px;
      margin:14px auto 10px;
      padding:10px 14px;
      text-align:center;
      background:linear-gradient(90deg, rgba(216,77,63,.16), rgba(216,77,63,.06));
      border:1px solid rgba(216,77,63,.38);
      border-radius:14px;
      color:var(--text);
    }
    #champList{ display:inline; list-style:none; margin:0; padding:0; }
    #champList li{ display:inline; margin:0 6px; color:var(--muted); }
    #champWhen{ display:block; margin-top:4px; color:var(--muted); font-size:12px; }

    /* champion belt */
    #champBelt{
      display:none;            /* JS will flip this on/off with same lockout logic */
      max-width:900px;
      margin:12px auto 18px;
      padding:8px 10px;
    }
    #champBelt svg{
      width:100%; height:auto; display:block;
    }
    @media (prefers-reduced-motion: no-preference){
      #champBelt svg #beltName{
        animation: beltGlow 2.4s ease-in-out infinite alternate;
      }
    }
    @keyframes beltGlow{
      from { fill:#1d1200; }
      to   { fill:#3b2a05; }
    }

    /* forms / buttons */
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .row>*{flex:1 1 220px}

    .label{font-size:12px;color:var(--muted);margin-bottom:6px}
    input[type="text"],input[type="number"],select{
      width:100%; padding:10px 12px;
      border-radius:12px;
      border:1px solid var(--divider);
      background:#13171d; color:var(--text);
      outline:none;
    }
    input:focus,select:focus{
      box-shadow:0 0 0 2px rgba(216,77,63,.28);
      border-color:var(--brand);
    }

    button{
      appearance:none;
      border:1px solid var(--divider);
      background:#13171d; color:var(--text);
      padding:12px 16px; border-radius:14px; cursor:pointer; font-weight:700;
      transition:transform .04s ease, filter .12s ease;
    }
    button:hover{ transform:translateY(-1px); }
    button.primary{ background:var(--brand); color:#111; border:none; }
    button:disabled{opacity:.6;cursor:not-allowed}

    .submit-row{
      display:flex; align-items:center; justify-content:center; gap:12px;
      margin-top:10px;
    }
    @media (max-width:720px){
      button{ width:100%; }
      .submit-row{ flex-direction:column; }
    }

    .tiny{font-size:12px;color:var(--muted)}
    .scoring{font-size:13px;color:var(--muted); text-align:center;}

    /* center empty states without touching JS */
    #yourPicks .tiny{ text-align:center; }
    .leaderboard td.tiny{ text-align:center; }

    /* fights */
    .list{display:grid;gap:10px}
    .fight{
      padding:12px 0;
      border-bottom:1px solid var(--divider);
    }
    .fight:last-child{ border-bottom:0; }
    .fight .name{ font-weight:800; margin-bottom:6px; font-size:15px; letter-spacing:.2px; }
    .fight .grid{ display:grid; gap:8px; grid-template-columns:repeat(4, minmax(0,1fr)); }
    @media (max-width:720px){ .fight .grid{ grid-template-columns:1fr 1fr; } }
    .tag{ font-size:12px; color:var(--muted); font-weight:600; opacity:.9 }

    /* your picks */
    #yourPicks .pick-line{
      padding:10px 0;
      display:flex; align-items:center; gap:12px;
      box-shadow:inset 0 -1px 0 var(--divider);
    }
    #yourPicks .pick-line:last-child{ box-shadow:none; }
    #yourPicks .pick-line > *:first-child{flex:1 1 auto}
    #yourPicks .pick-line > *:last-child{flex:0 0 auto}

    /* leaderboard */
    .leaderboard{ background:#151a20; border-color:var(--graphite); }
    .leaderboard table{ width:100%; border-collapse:collapse }
    .leaderboard thead th{
      position:sticky; top:0; z-index:1;
      background:#141920; color:var(--text);
      border-bottom:1px solid var(--graphite);
      font-weight:800; text-transform:uppercase; letter-spacing:.3px;
    }
    .leaderboard th,.leaderboard td{ padding:10px 8px; font-size:14px; }
    .leaderboard tbody tr:nth-child(even){ background:#12171f; }
    .leaderboard tbody tr:hover{ background:#151d27; }
    .leaderboard .center{ text-align:center; }
    .rank{ font-weight:800; }
    .pts{ font-weight:800; }
    .lb-me{ background:#172034 !important; }
    .lb-champ-name{ font-weight:800; }

    .debug{
      display:none; margin:10px 0; font-size:12px;
      color:#fff; background:#8a2e2e; border:1px solid #6d2222;
      padding:8px 10px; border-radius:8px;
    }
  </style>
</head>
<body>
  <!-- sticky header -->
  <div class="ffp-header">
    <div class="brand">
      <a class="logo" href="/" aria-label="Fantasy Fight Picks">
        <img src="/ffp-fist-octagon.png?v=20251005" alt="Fantasy Fight Picks emblem">
      </a>
      <div class="title">Fantasy Fight Picks <span id="champNames" class="champ-names" hidden></span></div>
      <span id="crownBadge" class="crown-badge" aria-hidden="true">üëë</span>
    </div>
    <div class="meta">
      <span id="statusText">status: ‚Ä¶</span>
      <span>‚Ä¢</span>
      <span id="lockoutText">lockout: ‚Ä¶</span>
    </div>
  </div>

  <div class="wrap page">
    <div id="debugBanner" class="debug"></div>

    <!-- champion ribbon -->
    <div id="champBanner" aria-live="polite">
      <ul id="champList"></ul>
      <div id="champWhen"></div>
    </div>

    <!-- champion belt (SVG; JS fills name/date and toggles visibility) -->
    <div id="champBelt" aria-hidden="true">
      <svg viewBox="0 0 900 260" role="img" aria-label="Champion Belt">
        <defs>
          <linearGradient id="strap" x1="0" x2="1">
            <stop offset="0%"  stop-opacity="1" stop-color="#2b2f39"/>
            <stop offset="50%" stop-opacity="1" stop-color="#1e232c"/>
            <stop offset="100%" stop-opacity="1" stop-color="#2b2f39"/>
          </linearGradient>
          <radialGradient id="gold" cx="50%" cy="45%" r="75%">
            <stop offset="0%"  stop-color="#fff5c8"/>
            <stop offset="45%" stop-color="#f2cf66"/>
            <stop offset="100%" stop-color="#a07319"/>
          </radialGradient>
          <radialGradient id="goldDim" cx="50%" cy="50%" r="75%">
            <stop offset="0%"  stop-color="#ffe9a5"/>
            <stop offset="60%" stop-color="#d6a741"/>
            <stop offset="100%" stop-color="#7a5a17"/>
          </radialGradient>
          <filter id="softShadow" x="-20%" y="-20%" width="140%" height="140%">
            <feDropShadow dx="0" dy="8" stdDeviation="12" flood-color="#000" flood-opacity=".35"/>
          </filter>
        </defs>

        <!-- strap -->
        <path d="M40,110 C110,70 200,50 300,50 H600 C700,50 790,70 860,110
                 C875,120 875,140 860,150 C790,190 700,210 600,210 H300
                 C200,210 110,190 40,150 C25,140 25,120 40,110 Z"
              fill="url(#strap)" filter="url(#softShadow)"/>

        <!-- side plates -->
        <g>
          <circle cx="190" cy="130" r="46" fill="url(#goldDim)" stroke="#5b4a19" stroke-width="4"/>
          <circle cx="710" cy="130" r="46" fill="url(#goldDim)" stroke="#5b4a19" stroke-width="4"/>
          <text x="190" y="136" text-anchor="middle" font-size="18" font-weight="800" fill="#352200">FFP</text>
          <text x="710" y="136" text-anchor="middle" font-size="18" font-weight="800" fill="#352200">FFP</text>
        </g>

        <!-- center plate -->
        <g>
          <circle cx="450" cy="130" r="84" fill="url(#gold)" stroke="#6b541e" stroke-width="6"/>
          <circle cx="450" cy="130" r="72" fill="transparent" stroke="#fff2b6" stroke-opacity=".55" stroke-width="3"/>

          <text x="450" y="108" text-anchor="middle" font-size="32" aria-hidden="true">üëë</text>

          <text x="450" y="130" text-anchor="middle"
                font-family="Teko, ui-sans-serif, system-ui, sans-serif"
                font-size="26" letter-spacing="1.5"
                fill="#2b1a00">CHAMPION</text>

          <text id="beltName" x="450" y="156" text-anchor="middle"
                font-size="28" font-weight="800" fill="#1d1200"></text>
        </g>

        <text id="beltWhen" x="450" y="232" text-anchor="middle"
              font-size="14" fill="#c7b072" opacity=".9"></text>
      </svg>
    </div>

    <!-- auth -->
    <div class="panel" id="authPanel"></div>

    <!-- scoring -->
    <div class="card--flat">
      <div class="scoring">
        Scoring: +3 Winner ‚Ä¢ +2 Method (if Winner is correct) ‚Ä¢ +1 Round (only if Winner + Method are correct and not Decision) ‚Ä¢ üê∂ Underdog bonus (by odds).
      </div>
    </div>

    <!-- picks -->
    <div class="panel" id="makePicksPanel">
      <div class="section-title">Make Your Picks</div>
      <div id="fightsList" class="list"></div>
      <div class="submit-row">
        <button id="submitBtn" class="primary">Submit Picks</button>
      </div>
    </div>

    <!-- your picks -->
    <div class="panel" id="yourPicksPanel">
      <div class="section-title">Your Picks</div>
      <div id="yourPicks" class="list"></div>
    </div>

    <!-- leaderboard -->
    <div class="panel leaderboard">
      <div class="section-title">Leaderboard</div>
      <table>
        <thead>
          <tr>
            <th class="center">Rank</th>
            <th>User</th>
            <th class="center">Points</th>
          </tr>
        </thead>
        <tbody id="lbBody"></tbody>
      </table>
    </div>
  </div>

  <script src="/script.js" defer></script>
</body>
</html>
