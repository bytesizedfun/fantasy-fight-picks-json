<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Fantasy Fight Picks 👊</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="app">
    <img src="logo.png" alt="Fantasy Fight Picks Logo" class="logo-banner" />

    <!-- ✅ LOCKOUT MESSAGE OR COUNTDOWN -->
    <div id="eventStatus" class="countdown-timer">Loading event status...</div>

    <div id="welcome"></div>
    <div id="usernamePrompt">
      <input type="text" id="usernameInput" placeholder="Enter your username" />
      <button>Start Picking</button>
    </div>

    <div id="fightList"></div>

    <div id="submitNote"></div>
    <button id="submitBtn" style="display:none;">Submit Picks</button>

    <!-- ✅ Updated Scoring Points -->
    <div class="scoring-rules">
      <p>✅ +1 for correct Winner</p>
      <p>✅ +1 for correct Method <span style="font-size:0.9em;">(only if the Winner is correct)</span></p>
      <p>✅ +1 for correct Round <span style="font-size:0.9em;">(only if the Winner and Method are both correct, and the fight did not end by Decision)</span></p>
      <p>🐶 +2 for correct Underdog pick</p>
    </div>

    <div id="myPicks"></div>

    <h2>🏆 Leaderboard</h2>
    <div id="leaderboard"></div>
    <div id="champion"></div>
  </div>

  <script src="script.js"></script>
  <audio id="punchSound" src="punch.mp3" preload="auto"></audio>

  <script>
    // 🔒 Display countdown or lock message
    document.addEventListener("DOMContentLoaded", async () => {
      const statusDiv = document.getElementById("eventStatus");
      try {
        const res = await fetch("/api/eventStatus");
        const data = await res.json();
        if (data.status === "live" || data.status === "ended") {
          statusDiv.textContent = "🔒 Picks are now locked";
        } else if (data.status === "upcoming") {
          const date = new Date(data.eventStart);
          statusDiv.textContent = `⏳ Picks lock: ${date.toLocaleString("en-US", {
            weekday: "short", month: "short", day: "numeric", hour: "numeric", minute: "2-digit"
          })}`;
        }
      } catch (err) {
        statusDiv.textContent = "⚠️ Couldn't load event status";
      }
    });
  </script>
</body>
</html>
